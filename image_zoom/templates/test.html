{% extends 'base.html' %}

{% block head %}
    <style>
        #imgContainer {
            width:300px;
            height:300px;
        }
        div{width:200px;height:200px;overflow:hidden;position:relative;border:1px solid #000;}
        div img{position:absolute;height:100%;width:auto;cursor:move;}
    </style>
{% endblock %}

{% block body %}

<!-- still working, zoom in/out a picture in a slected area -->
<!-- test 3 -->
{% block body %}
<div id="div" onmousewheel="return bbimg(this)">
    <img id="image" border="0" src="https://rulemining.org/wp-content/themes/rum-theme/images/pickaxe.png" /></div>
<script language="javascript">
  var params = {
    zoomVal:1,
    left: 0,
    top: 0,
    currentX: 0,
    currentY: 0,
    flag: false
  };
  function bbimg(o){
    var o=o.getElementsByTagName("image")[0];
    params.zoomVal+=event.wheelDelta/1200;
    if (params.zoomVal >= 0.2) {
      o.style.transform="scale("+params.zoomVal+")";
    } else {
      params.zoomVal=0.2;
      o.style.transform="scale("+params.zoomVal+")";
      return false;
    }
  }
  var getCss = function(o,key){
    return o.currentStyle? o.currentStyle[key] : document.defaultView.getComputedStyle(o,false)[key];
  };
  var startDrag = function(bar, target, callback){
    if(getCss(target, "left") !== "auto"){
      params.left = getCss(target, "left");
    }
    if(getCss(target, "top") !== "auto"){
      params.top = getCss(target, "top");
    }
    bar.onmousedown = function(event){
      params.flag = true;
      if(!event){
        event = window.event;
        bar.onselectstart = function(){
          return false;
        }
      }
      var e = event;
      params.currentX = e.clientX;
      params.currentY = e.clientY;
    };
    document.onmouseup = function(){
      params.flag = false;
      if(getCss(target, "left") !== "auto"){
        params.left = getCss(target, "left");
      }
      if(getCss(target, "top") !== "auto"){
        params.top = getCss(target, "top");
      }
    };
    document.onmousemove = function(event){
      var e = event ? event: window.event;
      if(params.flag){
        var nowX = e.clientX, nowY = e.clientY;
        var disX = nowX - params.currentX, disY = nowY - params.currentY;
        target.style.left = parseInt(params.left) + disX+ "px";
        target.style.top = parseInt(params.top) + disY+ "px";
        if (typeof callback == "function") {
          callback((parseInt(params.left) || 0) + disX, (parseInt(params.top) || 0) + disY);
        }
        if (event.preventDefault) {
          event.preventDefault();
        }
        return false;
      }
    }
  };
  startDrag(document.getElementById("image"),document.getElementById("image"))
</script>


{% endblock %} -->